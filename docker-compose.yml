services:
  homepi:
    image: ghcr.io/yavgenyp/homepi:latest
    build: .   # ignored when pulling the prebuilt image; used by `docker compose up --build`
    restart: unless-stopped
    env_file: .env
    ports:
      - "3000:3000"
    volumes:
      - homepi-data:/data
    # --- TTS audio playback (Raspberry Pi only) ---
    # Uncomment the lines below when TTS_ENABLED=true.
    # Gives the container access to the Pi's ALSA sound system.
    #
    # devices:
    #   - /dev/snd:/dev/snd
    # group_add:
    #   - audio

    # --- BLE support (Raspberry Pi only) ---
    # When enabling BLE, replace the ports + volumes block above with:
    #
    #   network_mode: host          # required for BlueZ; replaces ports:
    #   volumes:
    #     - homepi-data:/data
    #     - /run/dbus:/run/dbus:ro  # BlueZ communicates via D-Bus
    #   cap_add:
    #     - NET_ADMIN
    #     - SYS_ADMIN
    #
    # Pair Android phones first â€” see README BLE section for full instructions.

volumes:
  homepi-data:
